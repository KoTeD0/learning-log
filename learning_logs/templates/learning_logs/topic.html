{% extends "learning_logs/base.html" %}
{% load bootstrap4 %}

{% block page_header %}
    <h3>{{ topic }}</h3>
{% endblock page_header %}

{% block content %}
    <div>
        <p><a href="{% url 'learning_logs:new_entry' topic.id %}" class="btn btn-primary" role="button">add new entry</a></p>
        <p><a href="{% url 'learning_logs:change_public' topic.id %}" class="btn btn-secondary" role="button">public {{ topic.public }}</a></p>
    </div>

    {#  TODO: Users not own topic shoul not see any buttons, only entries in topics  #}

    {% for entry in entries %}
        <div class="card mb-3">
            <h4 class="card-header">
               {{ entry.date_added|date:'M d, Y H:i' }} {# '|' фильтр применяющий дальше формат даты. !Регистр имеет значение #}
                {% if user.username == topic.owner %}
                    <small>
                        <a href="{% url 'learning_logs:edit_entry' entry.id %}">edit entry</a>
                    </small>
                {% endif %}
            </h4>

            <div class="card-body">
                <p>{{ entry.text|linebreaks }}</p> {# linebreaks следит чтобы все разрывы текста присутствовали на самом деле #}
            </div>

        </div>
    {% empty %}
        <p>There are no entries for this topic yet.</p>
    {% endfor %}

{% endblock content %}
